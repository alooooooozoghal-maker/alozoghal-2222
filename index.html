<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ùˆ Ø°ØºØ§Ù„ | Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø°ØºØ§Ù„ </title>
    
    <!-- PWA Config -->
    <link rel="manifest" href="pwa/manifest.json">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" href="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg">

    <!-- Font -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css">
    
    <style>
        :root {
            --fire: #ff4d00;
            --gold: #e2b04a;
            --bg: #0a0a0a;
            --royal: #ffd700;
            --coal: #1a1a1a;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Vazirmatn', sans-serif;
        }
        
        body {
            background: var(--bg);
            color: #fff;
            min-height: 100vh;
            padding: 15px;
            background-image: radial-gradient(circle at 50% 0%, #3a1100 0%, #0a0a0a 80%);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: 50px;
        }
        
        /* ØªÛŒÚ©Ø± ØªØ¨Ù„ÛŒØºØ§ØªÛŒ */
        .ticker-container {
            width: 100%;
            max-width: 450px;
            background: #000;
            border-bottom: 2px solid var(--gold);
            overflow: hidden;
            white-space: nowrap;
            padding: 10px 0;
            margin-bottom: 15px;
            position: relative;
            border-radius: 0 0 10px 10px;
        }
        
        .ticker-text {
            display: inline-block;
            padding-right: 100%;
            animation: marquee 25s linear infinite;
            color: var(--gold);
            font-size: 14px;
            font-weight: 500;
        }
        
        @keyframes marquee {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Ù‡Ø¯Ø± Ùˆ Ù„ÙˆÚ¯Ùˆ */
        .header-section {
            text-align: center;
            margin-bottom: 25px;
            width: 100%;
            max-width: 450px;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .fire-anim {
            font-size: 32px;
            animation: firePulse 1.5s infinite alternate;
            filter: drop-shadow(0 0 5px #ff4d00);
        }
        
        @keyframes firePulse {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.2); opacity: 1; }
        }
        
        .main-logo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid var(--gold);
            object-fit: cover;
            box-shadow: 0 0 20px rgba(226, 176, 74, 0.5);
        }
        
        .brand-name {
            font-size: 32px;
            font-weight: 900;
            color: var(--gold);
            text-shadow: 0 0 10px rgba(255, 77, 0, 0.5);
            margin-bottom: 5px;
        }
        
        .brand-slogan {
            font-size: 16px;
            color: var(--royal);
            font-weight: 600;
            margin-bottom: 20px;
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            0% { text-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
            100% { text-shadow: 0 0 15px rgba(255, 215, 0, 0.8); }
        }
        
        /* Ø§Ø³ØªÙˆØ±ÛŒâ€ŒÙ‡Ø§ */
        .stories-container {
            display: flex;
            gap: 15px;
            padding: 15px 5px;
            overflow-x: auto;
            width: 100%;
            max-width: 450px;
            scrollbar-width: none;
            margin-bottom: 20px;
        }
        
        .stories-container::-webkit-scrollbar {
            display: none;
        }
        
        .story-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
            cursor: pointer;
        }
        
        .story-ring {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            padding: 3px;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
            transition: all 0.3s;
        }
        
        .story-ring:hover {
            transform: scale(1.05);
        }
        
        .story-ring.active {
            background: linear-gradient(45deg, #f09433, #dc2743, #bc1888);
            border: none;
            padding: 2px;
        }
        
        .story-ring img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #000;
        }
        
        .story-title {
            font-size: 12px;
            color: #ccc;
            text-align: center;
            max-width: 70px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* ØªØ¨Ù„ÛŒØºØ§Øª VIP */
        .vip-ad-card {
            width: 100%;
            max-width: 450px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 15px;
            margin: 10px 0 20px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: blinkBorder 3s infinite;
        }
        
        @keyframes blinkBorder {
            0%, 100% { border-color: var(--gold); box-shadow: 0 0 5px var(--gold); }
            50% { border-color: #fff; box-shadow: 0 0 15px rgba(255,255,255,0.5); }
        }
        
        .vip-img {
            width: 80px;
            height: 80px;
            border-radius: 15px;
            object-fit: cover;
            border: 1px solid var(--gold);
        }
        
        .vip-info {
            flex: 1;
            text-align: right;
        }
        
        .vip-title {
            color: var(--gold);
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .vip-desc {
            color: #ccc;
            font-size: 13px;
            line-height: 1.5;
            margin-bottom: 8px;
        }
        
        .btn-call-vip {
            background: #25D366;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s;
        }
        
        .btn-call-vip:hover {
            background: #1da851;
            transform: translateY(-2px);
        }
        
        /* Ú©Ø§Ø±Øª Ø³ÙØ§Ø±Ø´ */
        .order-card {
            width: 100%;
            max-width: 450px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: right;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #bbb;
            font-size: 14px;
            font-weight: 500;
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 15px;
            background: rgba(0,0,0,0.6);
            border: 1px solid #333;
            border-radius: 12px;
            color: #fff;
            text-align: right;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }
        
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            border-color: var(--gold);
            box-shadow: 0 0 10px rgba(226, 176, 74, 0.3);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        /* Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ */
        .cart-item {
            background: rgba(0,0,0,0.4);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 215, 0, 0.1);
        }
        
        .item-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .item-name {
            font-size: 18px;
            font-weight: bold;
            color: var(--gold);
        }
        
        .item-price {
            font-size: 16px;
            color: #fff;
        }
        
        .qty-box {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #000;
            border-radius: 12px;
            padding: 8px;
            border: 1px solid #333;
        }
        
        .qty-btn {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            border: none;
            background: #1a1a1a;
            color: var(--gold);
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .qty-btn:hover {
            background: #222;
            transform: scale(1.05);
        }
        
        .qty-display {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            min-width: 60px;
            text-align: center;
        }
        
        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            text-align: center;
            text-decoration: none;
            display: block;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .btn-gold {
            background: linear-gradient(135deg, var(--gold), #b8860b);
            color: #000;
            margin-top: 20px;
        }
        
        .btn-gps {
            background: rgba(0,0,0,0.5);
            color: #fff;
            border: 1px solid #555;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .btn-success {
            background: #25D366;
            color: #fff;
        }
        
        .btn-warning {
            background: #FF9800;
            color: #fff;
        }
        
        .btn-info {
            background: #0088cc;
            color: #fff;
        }
        
        .btn-secondary {
            background: #444;
            color: #fff;
        }
        
        .btn-danger {
            background: #8b0000;
            color: #fff;
        }
        
        .btn-action-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn-action-group .btn {
            flex: 1;
        }
        
        /* ÙØ§Ú©ØªÙˆØ± */
        .invoice-card {
            background: #1a1a1a;
            border: 3px double var(--gold);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }
        
        .invoice-header {
            color: var(--gold);
            font-size: 22px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--gold);
            padding-bottom: 10px;
        }
        
        .invoice-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px dotted #444;
            font-size: 15px;
        }
        
        .invoice-label {
            color: #bbb;
        }
        
        .invoice-value {
            color: #fff;
            font-weight: bold;
        }
        
        .invoice-total {
            font-size: 20px;
            color: var(--gold);
            font-weight: bold;
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid var(--gold);
        }
        
        .send-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }
        
        /* Ú†Ø§Ù„Ø´ */
        .challenge-link {
            display: block;
            margin: 20px 0;
            padding: 15px;
            text-decoration: none;
            color: #fff;
            background: rgba(255, 215, 0, 0.1);
            border: 2px dashed var(--gold);
            border-radius: 15px;
            font-weight: bold;
            font-size: 16px;
            text-align: center;
            animation: pulseChallenge 2s infinite;
            transition: all 0.3s;
        }
        
        .challenge-link:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: scale(1.02);
        }
        
        @keyframes pulseChallenge {
            0%, 100% { box-shadow: 0 0 10px var(--gold); }
            50% { box-shadow: 0 0 20px var(--fire); }
        }
        
        /* ÙÙˆØªØ± */
        .site-footer {
            width: 100%;
            max-width: 450px;
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid rgba(226, 176, 74, 0.3);
            border-radius: 20px;
            padding: 25px 20px;
            margin-top: 25px;
            text-align: center;
        }
        
        .footer-logo-small {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 1px solid var(--gold);
            margin-bottom: 15px;
        }
        
        .footer-title {
            color: var(--gold);
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .footer-text {
            font-size: 14px;
            color: #bbb;
            line-height: 1.7;
            text-align: justify;
            margin-bottom: 15px;
        }
        
        .footer-info-list {
            list-style: none;
            font-size: 14px;
            color: #ddd;
            margin-top: 15px;
        }
        
        .footer-info-list li {
            margin-bottom: 8px;
        }
        
        .footer-copyright {
            font-size: 12px;
            color: #666;
            margin-top: 20px;
            border-top: 1px solid #333;
            padding-top: 15px;
        }
        
        /* Ø¯Ú©Ù…Ù‡ ØªÙ…Ø§Ø³ Ø´Ù†Ø§ÙˆØ± */
        .call-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--gold);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 28px;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }
        
        .call-float:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 8px 20px rgba(226, 176, 74, 0.5);
        }
        
        /* Ø¯Ú©Ù…Ù‡ Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø´Ù†Ø§ÙˆØ± */
        .share-float {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: #25D366;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 24px;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            color: white;
        }
        
        .share-float:hover {
            transform: scale(1.1) rotate(-10deg);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.5);
        }
        
        /* Ø¯Ú©Ù…Ù‡ Ù…Ø®ÙÛŒ Ù¾Ù†Ù„ */
        .secret-admin-link {
            position: fixed;
            top: 5px;
            left: 5px;
            width: 30px;
            height: 30px;
            background: transparent;
            border: none;
            cursor: pointer;
            z-index: 9999;
            opacity: 0.05;
            transition: opacity 0.3s;
        }
        
        .secret-admin-link:hover {
            opacity: 0.3;
        }
        
        /* Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ */
        .alert {
            padding: 12px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 13px;
            text-align: center;
        }
        
        .alert-info {
            background: rgba(0, 150, 255, 0.1);
            border: 1px solid #0096ff;
            color: #0096ff;
        }
        
        .alert-success {
            background: rgba(37, 211, 102, 0.1);
            border: 1px solid #25D366;
            color: #25D366;
        }
        
        /* Ù…ÙˆØ¯Ø§Ù„ Ø§Ø³ØªÙˆØ±ÛŒ */
        .story-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .story-content {
            width: 90%;
            max-width: 400px;
            height: 70%;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }
        
        .story-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .story-close {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            z-index: 10001;
        }
        
        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªÙˆØ±ÛŒ */
        .story-buttons {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 0 20px;
            z-index: 10001;
        }
        
        .story-btn {
            padding: 12px 25px;
            border-radius: 12px;
            font-weight: bold;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            min-width: 150px;
            justify-content: center;
        }
        
        .story-call-btn {
            background: #25D366;
            color: white;
        }
        
        .story-link-btn {
            background: var(--gold);
            color: #000;
        }
        
        .story-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        /* Ø¨Ù†Ø± Ù†ØµØ¨ PWA - Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯Ù‡ */
        .pwa-banner {
            position: fixed;
            bottom: 20px;
            left: 15px;
            right: 15px;
            background: rgba(20, 20, 20, 0.98);
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 15px;
            z-index: 2000;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 30px rgba(226, 176, 74, 0.6);
            animation: slideUp 0.5s ease-out;
            display: none; /* Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù…Ø®ÙÛŒ */
            align-items: center;
            gap: 15px;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .banner-logo {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            border: 1px solid var(--gold);
        }
        
        .banner-text {
            flex: 1;
            font-size: 14px;
            color: #fff;
            text-align: right;
        }
        
        .banner-text strong {
            color: var(--gold);
            display: block;
            margin-bottom: 3px;
        }
        
        .btn-install {
            background: var(--gold);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .btn-install:hover {
            background: #d4a742;
            transform: translateY(-2px);
        }
        
        .btn-close-banner {
            background: transparent;
            color: #ccc;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            margin-right: -5px;
        }
    </style>
</head>
<body>

    <!-- Ø¯Ú©Ù…Ù‡ Ù…Ø®ÙÛŒ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª - Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯Ù‡ -->
    <button class="secret-admin-link" id="secret-admin-btn" title="ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª" onclick="handleAdminAccess()">âš™ï¸</button>

    <!-- ØªÛŒÚ©Ø± ØªØ¨Ù„ÛŒØºØ§ØªÛŒ -->
    <div class="ticker-container">
        <div class="ticker-text" id="ticker-box">ğŸ”¥ Ø§Ù„Ùˆ Ø°ØºØ§Ù„ | Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø°ØºØ§Ù„ Ù…Ø±ØºÙˆØ¨ | ØªØ­ÙˆÛŒÙ„ Ø³Ø±ÛŒØ¹ Ø¯Ø± Ø§ÛŒØ°Ù‡ ğŸ”¥</div>
    </div>

    <!-- Ø¨Ù†Ø± Ù†ØµØ¨ PWA Ù‡ÙˆØ´Ù…Ù†Ø¯ -->
    <div id="pwa-banner" class="pwa-banner">
        <button class="btn-close-banner" onclick="closePwaBanner()">Ã—</button>
        <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" class="banner-logo">
        <div class="banner-text">
            <strong>Ù†ØµØ¨ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù„Ùˆ Ø°ØºØ§Ù„</strong>
            Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹ØŒ Ø¢ÙÙ„Ø§ÛŒÙ† Ùˆ ØªØ¬Ø±Ø¨Ù‡â€ŒØ§ÛŒ Ø¨Ù‡ØªØ±
        </div>
        <button class="btn-install" id="installBtn">Ù†ØµØ¨ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†</button>
    </div>

    <!-- Ù‡Ø¯Ø± Ùˆ Ù„ÙˆÚ¯Ùˆ -->
    <div class="header-section">
        <div class="logo-container">
            <span class="fire-anim">ğŸ”¥</span>
            <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" class="main-logo">
            <span class="fire-anim">ğŸ”¥</span>
        </div>
        <div class="brand-name">Ø§Ù„Ùˆ Ø°ØºØ§Ù„</div>
        <div class="brand-slogan">Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ† Ùˆ Ø³Ø±ÛŒØ¹ Ø°ØºØ§Ù„</div>
        
        <!-- Ø§Ø³ØªÙˆØ±ÛŒâ€ŒÙ‡Ø§ -->
        <div class="stories-container" id="stories-container">
            <!-- Ø§Ø³ØªÙˆØ±ÛŒâ€ŒÙ‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ JavaScript Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </div>
    </div>

    <!-- ØªØ¨Ù„ÛŒØº VIP -->
    <div id="vip-ad-container">
        <!-- ØªØ¨Ù„ÛŒØºØ§Øª Ø§Ø² Ø·Ø±ÛŒÙ‚ JavaScript Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ø³ØªÙˆØ±ÛŒ -->
    <div id="story-modal" class="story-modal">
        <button class="story-close" onclick="closeStory()">Ã—</button>
        <div class="story-content" id="story-content">
            <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§Ø³ØªÙˆØ±ÛŒ -->
        </div>
        <div class="story-buttons" id="story-buttons">
            <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ØªÙ…Ø§Ø³ Ùˆ Ù„ÛŒÙ†Ú© -->
        </div>
    </div>

    <!-- Ú©Ø§Ø±Øª Ø³ÙØ§Ø±Ø´ -->
    <div class="order-card">
        <div id="form-area">
            <div class="form-group">
                <label class="form-label">ğŸ‘¤ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:</label>
                <input type="text" id="custName" class="form-input" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." oninput="checkSecretCode()">
            </div>
            
            <div class="form-group">
                <label class="form-label">ğŸ“± Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</label>
                <input type="tel" id="custPhone" class="form-input" placeholder="Ù…Ø«Ø§Ù„: 09123456789" dir="ltr" pattern="[0-9]{11}" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">ğŸ•’ Ø²Ù…Ø§Ù† ØªØ­ÙˆÛŒÙ„:</label>
                <select id="delivTime" class="form-select">
                    <option value="ÙÙˆØ±ÛŒ">ÙÙˆØ±ÛŒ (30 Ø¯Ù‚ÛŒÙ‚Ù‡)</option>
                    <option value="Û± Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±">Û± Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±</option>
                    <option value="Û² Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±">Û² Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±</option>
                    <option value="Û³ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±" selected>Û³ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±</option>
                    <option value="Û´ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±">Û´ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±</option>
                    <option value="Ûµ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±">Ûµ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">ğŸ  Ø¢Ø¯Ø±Ø³ Ù…Ø­Ù„Ù‡/Ú©ÙˆÚ†Ù‡:</label>
                <textarea id="custAddr" class="form-textarea" rows="3" placeholder="Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒÚ©..."></textarea>
            </div>
            
            <button class="btn btn-gps" id="gpsBtn" onclick="getLocation()">ğŸ“ Ø«Ø¨Øª Ù„ÙˆÚ©ÛŒØ´Ù† (GPS)</button>
            
            <!-- Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ -->
            <div class="cart-item">
                <div class="item-title">
                    <span class="item-name">Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ÛŒ Ù…Ø±ØºÙˆØ¨</span>
                    <span class="item-price">Û¶Ûµ,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <div class="qty-box">
                    <button class="qty-btn" onclick="updateQty('coal', -1)">-</button>
                    <span id="qty-coal" class="qty-display">1</span>
                    <button class="qty-btn" onclick="updateQty('coal', 1)">+</button>
                </div>
            </div>
            
            <button class="btn btn-gold" onclick="generateInvoice()">âœ¨ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ§Ú©ØªÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ</button>
        </div>
        
        <!-- ÙØ§Ú©ØªÙˆØ± -->
        <div id="invoice" class="invoice-card">
            <div class="invoice-header">ğŸ“‘ ÙØ§Ú©ØªÙˆØ± Ø³ÙØ§Ø±Ø´</div>
            <div class="invoice-row">
                <span class="invoice-label">Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ:</span>
                <span class="invoice-value" id="inv-name"></span>
            </div>
            <div class="invoice-row">
                <span class="invoice-label">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</span>
                <span class="invoice-value" id="inv-phone"></span>
            </div>
            <div class="invoice-row">
                <span class="invoice-label">Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ÛŒ:</span>
                <span class="invoice-value" id="inv-qty-coal"></span>
            </div>
            <div class="invoice-row">
                <span class="invoice-label">Ø²Ù…Ø§Ù† ØªØ­ÙˆÛŒÙ„:</span>
                <span class="invoice-value" id="inv-time"></span>
            </div>
            <div class="invoice-row">
                <span class="invoice-label">Ø¢Ø¯Ø±Ø³:</span>
                <span class="invoice-value" id="inv-addr"></span>
            </div>
            <div class="invoice-row">
                <span class="invoice-label">Ù„ÙˆÚ©ÛŒØ´Ù†:</span>
                <span class="invoice-value" id="inv-location"></span>
            </div>
            
            <div class="invoice-total" id="inv-price"></div>
            
            <div class="send-buttons">
                <a id="waLink" href="#" class="btn btn-success">ğŸ“± Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ÙˆØ§ØªØ³Ø§Ù¾</a>
                <a id="smsLink" href="#" class="btn btn-warning">ğŸ“¨ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú©</a>
                <button id="tgBtn" class="btn btn-info">âœˆï¸ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…</button>
            </div>
            
            <div class="btn-action-group">
                <button class="btn btn-secondary" onclick="editOrder()">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ø³ÙØ§Ø±Ø´</button>
                <button class="btn btn-danger" onclick="resetForm()">ğŸ”„ Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯</button>
            </div>
        </div>
    </div>

    <!-- Ù„ÛŒÙ†Ú© Ú†Ø§Ù„Ø´ -->
    <a href="https://aloozoghal-hash.github.io/-Mir-mir-/" class="challenge-link" target="_blank">
        ğŸ’¥ Ú†Ø§Ù„Ø´ Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø±Ùˆ Ø¨Ø¨Ø± | Û³ Ú©ÛŒØ³Ù‡ Ø°ØºØ§Ù„ Ø¬Ø§ÛŒØ²Ù‡ Ø¨Ú¯ÛŒØ± ğŸ’¥
    </a>

    <!-- ÙÙˆØªØ± -->
    <footer class="site-footer">
        <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" class="footer-logo-small">
        <div class="footer-title">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§Ù„Ùˆ Ø°ØºØ§Ù„</div>
        <p class="footer-text">
            Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø§Ø² Ø¯Ù„ Ø§ÛŒØ°Ù‡ Ø¨Ø±Ø§ÛŒ Ø³ÙØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ØµÙØ§ÛŒ Ø´Ù…Ø§. Ù‡Ø¯Ù Ù…Ø§ Ø±Ø³Ø§Ù†Ø¯Ù† Ù…Ø±ØºÙˆØ¨â€ŒØªØ±ÛŒÙ† Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ Ø¯Ø± Ú©Ù…ØªØ±ÛŒÙ† Ø²Ù…Ø§Ù† Ø§Ø³Øª.
        </p>
        <ul class="footer-info-list">
            <li>ğŸ“ Ø¢Ø¯Ø±Ø³: Ø§ÛŒØ°Ù‡ØŒ Ù¾Ø§Ø±Ú© Ù„Ø§Ù„Ù‡</li>
            <li>ğŸ“ ØªÙ„ÙÙ†: Û°Û¹Û²Û² Û°Û·Û³ Û°Û¶Û²Û¸</li>
            <li>ğŸ•’ Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ: Û· ØµØ¨Ø­ ØªØ§ Û¹ Ø´Ø¨</li>
        </ul>
        <div class="footer-copyright">
            ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª<br>
            Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ°Ù‡
        </div>
    </footer>

    <!-- Ø¯Ú©Ù…Ù‡ ØªÙ…Ø§Ø³ Ø´Ù†Ø§ÙˆØ± -->
    <a href="tel:09220730628" class="call-float">ğŸ“</a>
    
    <!-- Ø¯Ú©Ù…Ù‡ Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø´Ù†Ø§ÙˆØ± -->
    <button class="share-float" id="shareBtn" title="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø³Ø§ÛŒØª">ğŸ”—</button>

    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªØ¨Ù„ÛŒØºØ§Øª -->
    <script src="ads-simple.js"></script>
    
    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ø¯ÛŒØ±ÛŒØª Ù†ØµØ¨ PWA -->
    <script src="install-manager.js"></script>
    
    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ØµÙ„ÛŒ -->
    <script>
        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡
        const SECRET_CODE = "Ø¹Ù„ÛŒ Ù†Ø§Ø¯Ø±ÛŒØ§Ù† 1362541";
        const GOOGLE_BRIDGE_URL = "https://script.google.com/macros/s/AKfycbyLQjEqmjs5Re2m7nf3lGU_IZQU0ILuFgiJWxrEQ306AgUy1zW090quuwv1QLWVOQyV/exec";
        
        let secretEntered = false;
        let currentLocation = "";
        let coalQty = 1;
        const COAL_PRICE = 65000;
        let finalMsg = "";
        
        // ØªÛŒÚ©Ø± ØªØ¨Ù„ÛŒØºØ§ØªÛŒ - Ø§Ø² JSON Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯
        let tickerMessages = [];
        let currentTickerIndex = 0;
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² JSON ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
        async function loadData() {
            try {
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÛŒÚ©Ø±
                const tickerResponse = await fetch('data/ticker.json');
                const tickerData = await tickerResponse.json();
                tickerMessages = tickerData.messages;
                
                if (tickerMessages.length > 0) {
                    initTicker();
                    // ØªØºÛŒÛŒØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± 20 Ø«Ø§Ù†ÛŒÙ‡
                    setInterval(() => {
                        currentTickerIndex = (currentTickerIndex + 1) % tickerMessages.length;
                        updateTicker();
                    }, 20000);
                }
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø³ØªÙˆØ±ÛŒâ€ŒÙ‡Ø§
                const storiesResponse = await fetch('data/stories.json');
                const storiesData = await storiesResponse.json();
                loadStories(storiesData.stories);
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØ¨Ù„ÛŒØºØ§Øª VIP
                const vipResponse = await fetch('data/vip-ads.json');
                const vipData = await vipResponse.json();
                loadVipAds(vipData.ads);
                
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§:', error);
                // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
                tickerMessages = [
                    "ğŸ”¥ Ø§Ù„Ùˆ Ø°ØºØ§Ù„ | Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø°ØºØ§Ù„ Ù…Ø±ØºÙˆØ¨ | ØªØ­ÙˆÛŒÙ„ Ø³Ø±ÛŒØ¹ Ø¯Ø± Ø§ÛŒØ°Ù‡ ğŸ”¥",
                    "âœ¨ Ø°ØºØ§Ù„ Ø¯Ø±Ø¬Ù‡ ÛŒÚ© Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¹Ø§Ù„ÛŒ | Ù‚ÛŒÙ…Øª Ù…Ù†Ø§Ø³Ø¨ âœ¨"
                ];
                initTicker();
            }
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø³ØªÙˆØ±ÛŒâ€ŒÙ‡Ø§
        function loadStories(stories) {
            const container = document.getElementById('stories-container');
            container.innerHTML = '';
            
            stories.filter(story => story.active).forEach(story => {
                const storyItem = document.createElement('div');
                storyItem.className = 'story-item';
                storyItem.innerHTML = `
                    <div class="story-ring" onclick="openStory(${story.id})">
                        <img src="${story.image}" alt="${story.title}">
                    </div>
                    <div class="story-title">${story.title}</div>
                `;
                container.appendChild(storyItem);
            });
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØ¨Ù„ÛŒØºØ§Øª VIP
        function loadVipAds(ads) {
            const container = document.getElementById('vip-ad-container');
            container.innerHTML = '';
            
            const activeAds = ads.filter(ad => ad.active);
            if (activeAds.length === 0) return;
            
            const ad = activeAds[0]; // Ù†Ù…Ø§ÛŒØ´ Ø§ÙˆÙ„ÛŒÙ† ØªØ¨Ù„ÛŒØº ÙØ¹Ø§Ù„
            const adCard = document.createElement('div');
            adCard.className = 'vip-ad-card';
            adCard.innerHTML = `
                <img src="${ad.image}" class="vip-img" alt="${ad.title}">
                <div class="vip-info">
                    <div class="vip-title">${ad.title}</div>
                    <div class="vip-desc">${ad.description}</div>
                    <a href="tel:${ad.phone}" class="btn-call-vip">ğŸ“ ØªÙ…Ø§Ø³ VIP</a>
                    <a href="https://wa.me/${ad.whatsapp}" class="btn-call-vip" style="background: #25D366; margin-right: 10px;">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ù¾</a>
                </div>
            `;
            container.appendChild(adCard);
        }
        
        // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø§Ø³ØªÙˆØ±ÛŒ
        function openStory(storyId) {
            // Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§ÛŒØ¯ Ø¯ÛŒØªØ§ÛŒ Ø§Ø³ØªÙˆØ±ÛŒ Ø±Ø§ Ø§Ø² Ø¢Ø±Ø§ÛŒÙ‡ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒÙ…
            // ÙØ¹Ù„Ø§Ù‹ ÛŒÚ© Ù†Ù…ÙˆÙ†Ù‡ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ…
            document.getElementById('story-content').innerHTML = `
                <img src="https://via.placeholder.com/400x600" class="story-img" alt="Story">
            `;
            
            document.getElementById('story-buttons').innerHTML = `
                <a href="tel:09220730628" class="story-btn story-call-btn">ğŸ“ ØªÙ…Ø§Ø³</a>
                <a href="https://wa.me/989220730628" class="story-btn story-link-btn">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ù¾</a>
            `;
            
            document.getElementById('story-modal').style.display = 'flex';
        }
        
        // Ø¨Ø³ØªÙ† Ø§Ø³ØªÙˆØ±ÛŒ
        function closeStory() {
            document.getElementById('story-modal').style.display = 'none';
        }
        
        function initTicker() {
            if (tickerMessages.length > 0) {
                updateTicker();
            }
        }
        
        function updateTicker() {
            if(tickerMessages.length === 0) return;
            document.getElementById('ticker-box').textContent = tickerMessages[currentTickerIndex];
        }
        
        // Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù…ÛŒØª
        function updateQty(type, change) {
            if(type === 'coal') {
                const newQty = coalQty + change;
                if(newQty >= 1 && newQty <= 20) {
                    coalQty = newQty;
                    document.getElementById('qty-coal').textContent = coalQty;
                }
            }
        }
        
        // Ø¯Ø±ÛŒØ§ÙØª Ù„ÙˆÚ©ÛŒØ´Ù†
        function getLocation() {
            const gpsBtn = document.getElementById('gpsBtn');
            if(!navigator.geolocation) {
                gpsBtn.innerHTML = 'âŒ Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² GPS Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯';
                return;
            }
            
            gpsBtn.innerHTML = 'â³ Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ù„ÙˆÚ©ÛŒØ´Ù†...';
            gpsBtn.disabled = true;
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    currentLocation = `https://www.google.com/maps?q=${lat},${lng}`;
                    
                    gpsBtn.innerHTML = 'âœ… Ù„ÙˆÚ©ÛŒØ´Ù† Ø«Ø¨Øª Ø´Ø¯';
                    gpsBtn.style.background = 'rgba(37, 211, 102, 0.2)';
                    gpsBtn.style.borderColor = '#25D366';
                    gpsBtn.style.color = '#25D366';
                    
                    // Ù†Ù…Ø§ÛŒØ´ Ù‡Ø´Ø¯Ø§Ø± Ù…ÙˆÙÙ‚ÛŒØª
                    showAlert('Ù„ÙˆÚ©ÛŒØ´Ù† Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯!', 'success');
                },
                (error) => {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª:', error);
                    gpsBtn.innerHTML = 'âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù„ÙˆÚ©ÛŒØ´Ù†';
                    gpsBtn.style.background = 'rgba(255, 0, 0, 0.2)';
                    gpsBtn.style.borderColor = '#ff0000';
                    gpsBtn.style.color = '#ff0000';
                    
                    showAlert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª. Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯.', 'info');
                }
            );
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù‡Ø´Ø¯Ø§Ø±
        function showAlert(message, type = 'info') {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ ÙØ±Ù…
            const formArea = document.getElementById('form-area');
            formArea.insertBefore(alertDiv, formArea.firstChild);
            
            // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø«Ø§Ù†ÛŒÙ‡
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }
        
        // ØªÙˆÙ„ÛŒØ¯ ÙØ§Ú©ØªÙˆØ±
        function generateInvoice() {
            const name = document.getElementById('custName').value.trim();
            const phone = document.getElementById('custPhone').value.trim();
            const addr = document.getElementById('custAddr').value.trim();
            const time = document.getElementById('delivTime').value;
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
            if(!name || name.length < 2) {
                showAlert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø­Ø¯Ø§Ù‚Ù„ Û² Ø­Ø±Ù)', 'info');
                document.getElementById('custName').focus();
                return;
            }
            
            if(!phone || phone.length < 10 || !phone.match(/^[0-9]{10,11}$/)) {
                showAlert('Ù„Ø·ÙØ§Ù‹ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Û±Û°-Û±Û± Ø±Ù‚Ù…)', 'info');
                document.getElementById('custPhone').focus();
                return;
            }
            
            if(!addr || addr.length < 10) {
                showAlert('Ù„Ø·ÙØ§Ù‹ Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„ Ø¨Ø§ Ø­Ø¯Ø§Ù‚Ù„ Û±Û° Ú©Ø§Ø±Ø§Ú©ØªØ± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'info');
                document.getElementById('custAddr').focus();
                return;
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª
            const totalPrice = coalQty * COAL_PRICE;
            
            // Ù¾Ø± Ú©Ø±Ø¯Ù† ÙØ§Ú©ØªÙˆØ±
            document.getElementById('inv-name').textContent = name;
            document.getElementById('inv-phone').textContent = phone;
            document.getElementById('inv-qty-coal').textContent = `${coalQty} Ú©ÛŒØ³Ù‡`;
            document.getElementById('inv-time').textContent = time;
            document.getElementById('inv-addr').textContent = addr;
            document.getElementById('inv-location').textContent = currentLocation ? 'Ø«Ø¨Øª Ø´Ø¯Ù‡' : 'Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡';
            document.getElementById('inv-price').textContent = `${totalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†`;
            
            // ØªÙˆÙ„ÛŒØ¯ Ù¾ÛŒØ§Ù… Ø³ÙØ§Ø±Ø´
            finalMsg = `Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯ Ø§Ù„Ùˆ Ø°ØºØ§Ù„ ğŸ”¥
            
ğŸ‘¤ Ù†Ø§Ù…: ${name}
ğŸ“± ØªÙ„ÙÙ†: ${phone}
ğŸ“¦ Ø°ØºØ§Ù„: ${coalQty} Ú©ÛŒØ³Ù‡
ğŸ’° Ù…Ø¨Ù„Øº: ${totalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†
ğŸ•’ Ø²Ù…Ø§Ù† ØªØ­ÙˆÛŒÙ„: ${time}
ğŸ  Ø¢Ø¯Ø±Ø³: ${addr}
${currentLocation ? `ğŸ“ Ù„ÙˆÚ©ÛŒØ´Ù†: ${currentLocation}` : ''}
â° Ø²Ù…Ø§Ù† Ø³ÙØ§Ø±Ø´: ${new Date().toLocaleString('fa-IR')}`;
            
            // Ù„ÛŒÙ†Ú© ÙˆØ§ØªØ³Ø§Ù¾
            const waMessage = encodeURIComponent(`Ø³Ù„Ø§Ù… Ø§Ù„Ùˆ Ø°ØºØ§Ù„ ğŸ”¥

ğŸ‘¤ Ù†Ø§Ù…: ${name}
ğŸ“± ØªÙ„ÙÙ†: ${phone}
ğŸ“¦ Ø°ØºØ§Ù„: ${coalQty} Ú©ÛŒØ³Ù‡
ğŸ’° Ù…Ø¨Ù„Øº: ${totalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†
ğŸ•’ ØªØ­ÙˆÛŒÙ„: ${time}
ğŸ  Ø¢Ø¯Ø±Ø³: ${addr}
${currentLocation ? `ğŸ“ Ù„ÙˆÚ©ÛŒØ´Ù†: ${currentLocation}` : ''}

Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ø³ÙØ§Ø±Ø´ Ø±Ø§ ØªØ£ÛŒÛŒØ¯ Ú©Ù†ÛŒØ¯.`);
            
            document.getElementById('waLink').href = `https://wa.me/989220730628?text=${waMessage}`;
            
            // Ù„ÛŒÙ†Ú© Ù¾ÛŒØ§Ù…Ú©
            const smsMessage = encodeURIComponent(`Ø³ÙØ§Ø±Ø´ Ø§Ù„Ùˆ Ø°ØºØ§Ù„
Ù†Ø§Ù…: ${name}
ØªÙ„ÙÙ†: ${phone}
Ø°ØºØ§Ù„: ${coalQty} Ú©ÛŒØ³Ù‡
Ù…Ø¨Ù„Øº: ${totalPrice.toLocaleString()}
ØªØ­ÙˆÛŒÙ„: ${time}
Ø¢Ø¯Ø±Ø³: ${addr}`);
            
            document.getElementById('smsLink').href = `sms:989220730628?body=${smsMessage}`;
            
            // ØªÙ†Ø¸ÛŒÙ… event listener Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…
            document.getElementById('tgBtn').onclick = sendToTelegram;
            
            // Ù†Ù…Ø§ÛŒØ´ ÙØ§Ú©ØªÙˆØ± Ùˆ Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† ÙØ±Ù…
            document.getElementById('form-area').style.display = 'none';
            document.getElementById('invoice').style.display = 'block';
            
            // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ ÙØ§Ú©ØªÙˆØ±
            document.getElementById('invoice').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø² Ø·Ø±ÛŒÙ‚ Google Apps Script
        async function sendToTelegram() {
            const btn = document.getElementById('tgBtn'); 
            btn.disabled = true; 
            btn.innerText = "â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„ Ø³ÛŒØ³ØªÙ…ÛŒ...";
            
            try {
                // Ø§Ø±Ø³Ø§Ù„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ Google Apps Script
                await fetch(GOOGLE_BRIDGE_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: finalMsg,
                        action: 'send_order'
                    })
                });
                
                btn.innerHTML = "âœ… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯";
                showAlert('Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!', 'success');
                
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…:', error);
                btn.innerHTML = "âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„";
                showAlert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…. Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ ÙˆØ§ØªØ³Ø§Ù¾ ÛŒØ§ Ù¾ÛŒØ§Ù…Ú© Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯.', 'info');
            } finally {
                setTimeout(() => {
                    btn.disabled = false;
                    btn.innerHTML = "âœˆï¸ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…";
                }, 3000);
            }
        }
        
        // ÙˆÛŒØ±Ø§ÛŒØ´ Ø³ÙØ§Ø±Ø´
        function editOrder() {
            document.getElementById('invoice').style.display = 'none';
            document.getElementById('form-area').style.display = 'block';
            document.getElementById('form-area').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Ø±ÛŒØ³Øª ÙØ±Ù…
        function resetForm() {
            document.getElementById('custName').value = '';
            document.getElementById('custPhone').value = '';
            document.getElementById('custAddr').value = '';
            document.getElementById('delivTime').value = 'Û³ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ø±';
            coalQty = 1;
            document.getElementById('qty-coal').textContent = '1';
            currentLocation = '';
            
            const gpsBtn = document.getElementById('gpsBtn');
            gpsBtn.innerHTML = 'ğŸ“ Ø«Ø¨Øª Ù„ÙˆÚ©ÛŒØ´Ù† (GPS)';
            gpsBtn.disabled = false;
            gpsBtn.style.background = '';
            gpsBtn.style.borderColor = '';
            gpsBtn.style.color = '';
            
            document.getElementById('invoice').style.display = 'none';
            document.getElementById('form-area').style.display = 'block';
            
            showAlert('ÙØ±Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø±ÛŒØ³Øª Ø´Ø¯. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯ÛŒ Ø«Ø¨Øª Ú©Ù†ÛŒØ¯.', 'success');
        }
        
        // Ø¨Ø±Ø±Ø³ÛŒ Ø±Ù…Ø² Ù…Ø®ÙÛŒ
        function checkSecretCode() {
            const nameInput = document.getElementById('custName').value.trim();
            if (nameInput === SECRET_CODE) {
                secretEntered = true;
                document.getElementById('secret-admin-btn').style.opacity = '1';
                showAlert('Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯! Ø¯Ú©Ù…Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø± Ú¯ÙˆØ´Ù‡ Ø¨Ø§Ù„Ø§ Ø³Ù…Øª Ú†Ù¾ Ù†Ù…Ø§ÛŒØ§Ù† Ø´Ø¯.', 'success');
            }
        }
        
        // Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª
        function handleAdminAccess() {
            if (secretEntered) {
                window.open('admin-panel.html', '_blank');
            } else {
                showAlert('Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØªØŒ Ø§Ø¨ØªØ¯Ø§ Ø±Ù…Ø² Ù…Ø®ÙÛŒ Ø±Ø§ Ø¯Ø± ÙÛŒÙ„Ø¯ Ù†Ø§Ù… ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.', 'info');
            }
        }
        
        // Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ
        document.getElementById('shareBtn').addEventListener('click', async () => {
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'Ø§Ù„Ùˆ Ø°ØºØ§Ù„',
                        text: 'Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø°ØºØ§Ù„ Ù…Ø±ØºÙˆØ¨ Ø¯Ø± Ø§ÛŒØ°Ù‡',
                        url: window.location.href,
                    });
                } catch (err) {
                    console.log('Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù„ØºÙˆ Ø´Ø¯:', err);
                }
            } else {
                // Fallback for browsers that don't support Web Share API
                const shareUrl = `https://wa.me/?text=${encodeURIComponent('Ø³ÙØ§Ø±Ø´ Ø°ØºØ§Ù„ Ø§Ø² Ø§Ù„Ùˆ Ø°ØºØ§Ù„ ğŸ”¥\n' + window.location.href)}`;
                window.open(shareUrl, '_blank');
            }
        });
        
        // Ø¨Ø³ØªÙ† Ø¨Ù†Ø± PWA
        function closePwaBanner() {
            document.getElementById('pwa-banner').style.display = 'none';
            localStorage.setItem('pwa_banner_closed', 'true');
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¨Ù†Ø± PWA Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ø³ØªÙ‡ Ù†Ø´Ø¯Ù‡
            if (!localStorage.getItem('pwa_banner_closed')) {
                // Ù†Ù…Ø§ÛŒØ´ Ø¨Ù†Ø± Ø¨Ø§ ØªØ£Ø®ÛŒØ± 3 Ø«Ø§Ù†ÛŒÙ‡
                setTimeout(() => {
                    document.getElementById('pwa-banner').style.display = 'flex';
                }, 3000);
            }
        });
    </script>
    
    <!-- Ø«Ø¨Øª Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('pwa/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker Ø«Ø¨Øª Ø´Ø¯:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª ServiceWorker:', error);
                    });
            });
        }
    </script>
</body>
</html>
